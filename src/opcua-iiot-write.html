<!--
 The BSD 3-Clause License

 Copyright 2016,2017 - Klaus Landsdorf (http://bianco-royal.de/)
 Copyright 2015,2016 - Mika Karaila, Valmet Automation Inc. (node-red-contrib-opcua)
 All rights reserved.
 node-red-contrib-opcua-iiot
-->

<script type="text/javascript">
  RED.nodes.registerType('OPCUA-IIoT-Write', {
    category: 'iiot',
    color: "#ABCDEF",
    defaults: {
      endpoint: {value: "", required: true, type: "OPCUA-IIoT-Connector"},
      action: {value: "read", required: true},
      time: {value: 10},
      timeUnit: {value: "s"},
      name: {value: ""}
    },
    inputs: 1,
    outputs: 1,
    align: "right",
    icon: "opcuaiiot.png",
    label: function () {
      return this.name || "OPC UA Write";
    },
    labelStyle: function () {
      return this.name ? "node_label_italic" : "";
    },
    oneditprepare: function () {

      let node = this;

      try {
        let inputAction = $('#node-input-action');
        let inputTime = $('#node-input-timerow');
        change_time_input(); // first to fit config now
        inputAction.change(change_time_input);

      } catch (err) {
        console.log(err);
      }

      function change_time_input () {
        if (inputAction.val() == "subscribe" || inputAction.val() == "events") {
          inputTime.show();
        }
        else {
          inputTime.hide();
        }
      }
    }
  });
</script>


<script type="text/x-red" data-template-name="OPCUA-IIoT-Write">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tasks"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="">
    </div>
    <div class="form-row">
        <label for="node-input-endpoint"><i class="icon-tasks"></i> Endpoint</label>
        <input type="text" id="node-input-endpoint" placeholder="opc.tcp://localhost:4334">
    </div>
</script>

<script type="text/x-red" data-help-name="OPCUA-IIoT-Write">
</script>
